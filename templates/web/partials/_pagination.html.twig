{# templates/web/partials/_pagination.html.twig #}
{# Este componente reutilizable dibuja la paginación para cualquier listado #}

{% if npaginas > 1 %}
    <nav aria-label="Paginación de resultados">
        <ul class="pagination">
            {# Botón 'Anterior' #}
            <li class="page-item {{ paginaActual == 1 ? 'disabled' : '' }}">
                <a class="page-link" href="{{ paginaActual > 1 ? path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all)|merge({'page': paginaActual - 1})) : '#' }}">&laquo;</a>
            </li>

            {# Lógica para mostrar los números de página (ej. 1 ... 4 5 6 ... 10) #}
            {% set pageRange = 2 %}
            {% for i in 1..npaginas %}
                {% if i == 1 or i == npaginas or (i >= paginaActual - pageRange and i <= paginaActual + pageRange) %}
                    {% if loop.last and i > paginaActual + pageRange + 1 %}
                        <li class="page-item disabled"><span class="page-link">...</span></li>
                    {% endif %}
                    <li class="page-item {{ i == paginaActual ? 'active' : '' }}">
                        <a class="page-link" href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all)|merge({'page': i})) }}">{{ i }}</a>
                    </li>
                    {% if loop.first and i < paginaActual - pageRange - 1 %}
                        <li class="page-item disabled"><span class="page-link">...</span></li>
                    {% endif %}
                {% endif %}
            {% endfor %}

            {# Botón 'Siguiente' #}
            <li class="page-item {{ paginaActual == npaginas ? 'disabled' : '' }}">
                <a class="page-link" href="{{ paginaActual < npaginas ? path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all)|merge({'page': paginaActual + 1})) : '#' }}">&raquo;</a>
            </li>
        </ul>
    </nav>
{% endif %}