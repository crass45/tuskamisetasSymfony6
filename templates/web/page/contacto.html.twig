{# /templates/empresa.html.twig #}
{% extends "web/estaticoPlantilla.html.twig" %}

{% block meta %}
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key={{ gcp_api_key }}"></script>
{% endblock %}

{# CAMBIADO: El título ahora refleja el nuevo propósito de la página #}
{% block title %}Nuestra Empresa y Contacto | Tuskamisetas.com{% endblock %}

{# CAMBIADO: La descripción combina la autoridad de la empresa con los datos de contacto #}
{% block metaDescription %}Somos líderes en personalización textil en España. Conoce nuestra empresa, nuestro taller y contacta con nosotros. Serigrafía, DTF y más.{% endblock %}

{% block datosEstructurado %}
    {# El schema 'LocalBusiness' sigue siendo 100% correcto para esta página #}
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "LocalBusiness",
            "name": "TusKamisetas",
            "image": "https://www.tuskamisetas.com/logo.png",
            "url": "https://www.tuskamisetas.com",
            "telephone": "+34 968 654 970",
            "address": {
                "@type": "PostalAddress",
                "streetAddress": "C. Calasparra, 24",
                "addressLocality": "Murcia",
                "addressRegion": "Murcia",
                "postalCode": "30180",
                "addressCountry": "ES"
            },
            "openingHours": [
                "Mo-Fr 09:00-14:00",
                "Mo-Fr 15:00-18:30"
            ],
            "sameAs": [
                "https://www.facebook.com/tuskamisetas",
                "https://www.instagram.com/tuskamisetas"
            ]
        }
    </script>
{% endblock %}

{% block migas %}
    {# CAMBIADO: Las migas de pan ahora apuntan a "Nuestra Empresa" #}
    <div class="breadcrumbs">
        <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemprop="itemListElement" itemscope
                itemtype="http://schema.org/ListItem">
                <a itemprop="item" href="{{ path('app_home') }}">
                    <span itemprop="title">{% trans %}Principal{% endtrans %}</span></a>
                <meta itemprop="position" content="1"/>
            </li>
            <li class="active" itemprop="itemListElement" itemscope
                itemtype="http://schema.org/ListItem">
                {# CAMBIADO: Actualiza 'app_empresa' al nombre de tu nueva ruta #}
                <a itemprop="item" href="{{ path('app_contact') }}" class="miActive">
                    <span itemprop="title">{% trans %}Nuestra Empresa{% endtrans %}</span>
                </a>
                <meta itemprop="position" content="2"/>
            </li>
        </ol>
    </div>
{% endblock %}

{% block baseBody %}
    {# El schema 'LocalBusiness' es correcto para la sección #}
    <div itemscope itemtype="https://schema.org/LocalBusiness" class="section">

        {# El H1 que acordamos #}
        <h1>{% trans %}Tuskamisetas.com: Líderes en Personalización Textil en España{% endtrans %}</h1>

        {# --- INICIO DEL NUEVO CONTENIDO DE EMPRESA --- #}
        {# He añadido un container para que siga el estilo de tu web #}
        <div class="tkmContainer" style="margin-top: 30px; margin-bottom: 30px;">
            <div class="row">
                <div class="col-xs-12">

                    <p>En Tuskamisetas.com, convertimos tus ideas en realidad tangible. Somos la empresa de referencia en España especializada en la <strong>personalización de camisetas</strong> y todo tipo de <strong>textil publicitario</strong> y regalos promocionales.</p>

                    <p>Desde nuestros talleres, ofrecemos un servicio nacional ágil, profesional y con la mejor relación calidad-precio del mercado. No solo estampamos ropa; creamos soluciones de <em>merchandising</em> y vestuario que hacen destacar a tu marca, evento o grupo.</p>

                    <p>Entendemos que cada proyecto es único. Por eso, combinamos la tecnología de impresión más avanzada con un equipo de expertos apasionados, listos para asesorarte y garantizar que tu pedido sea un éxito rotundo.</p>

                    <hr style="margin-top: 30px; margin-bottom: 30px;">

                    <h2>¿Por Qué Tuskamisetas.com es tu Socio Estratégico en Personalización?</h2>

                    <p>Afirmar ser líderes es fácil, pero en Tuskamisetas.com lo demostramos con hechos. Miles de clientes en toda España nos eligen por cuatro razones fundamentales:</p>

                    <h3>1. Tecnología de Vanguardia: Serigrafía, DTF y Bordado</h3>
                    <p>No nos limitamos a una sola técnica. Dominamos todos los métodos de marcaje para ofrecerte siempre la mejor solución:</p>
                    <ul>
                        <li><strong>Serigrafía Textil:</strong> Perfecta para grandes pedidos (eventos, peñas, promociones). Rentable, increíblemente duradera y con colores vibrantes.</li>
                        <li><strong>Impresión Digital (DTF):</strong> La revolución del color. Ideal para diseños complejos, fotografías o pedidos pequeños sin límite de color y con un detalle espectacular.</li>
                        <li><strong>Bordado Profesional:</strong> El acabado más premium y duradero. Perfecto para polos, ropa laboral, gorras y escudos, aportando una imagen de máxima calidad.</li>
                    </ul>

                    <h3>2. Calidad-Precio Imbatible</h3>
                    <p>Creemos que la alta calidad no debe ser un lujo. Gracias a la optimización de nuestros talleres y a la compra de grandes volúmenes de material, ofrecemos <strong>camisetas personalizadas baratas</strong> y productos promocionales sin sacrificar ni un ápice la calidad del acabado.</p>

                    <h3>3. Asesoramiento Experto y Personalizado</h3>
                    <p>¿No sabes qué técnica elegir? ¿Dudas sobre el tipo de tejido? Nuestro equipo te asesora. Somos artesanos digitales y te guiaremos para que tu diseño brille y tu presupuesto se respete. Somos tu socio de confianza, no una simple tienda online.</p>

                    <h3>4. Compromiso Real: De Nuestro Taller a tu Puerta</h3>
                    <p>Somos un taller real, no un intermediario. Controlamos cada fase de la producción, lo que nos permite garantizar plazos de entrega ágiles y fiables en cualquier punto de España. Tu evento o campaña de marketing está segura con nosotros.</p>

                    <hr style="margin-top: 30px; margin-bottom: 30px;">

                    <h2>Soluciones de Personalización para Cada Necesidad</h2>
                    <p>Nuestra especialidad es adaptarnos a ti. Damos servicio a una amplia gama de clientes:</p>
                    <ul>
                        <li><strong>Empresas y Ropa Laboral:</strong> Potencia tu imagen de marca con uniformes, polos bordados, chalecos y camisetas corporativas. Somos expertos en <em>merchandising</em> para ferias y eventos.</li>
                        <li><strong>Eventos y Promociones:</strong> Gestionamos grandes volúmenes para carreras populares (camisetas técnicas), festivales, conciertos y campañas de marketing.</li>
                        <li><strong>Grupos, Peñas y Asociaciones:</strong> La mejor calidad al mejor precio para tus fiestas, viajes de fin de curso, despedidas o equipaciones de club.</li>
                        <li><strong>Particulares y Diseñadores:</strong> ¿Quieres crear tu propia marca o un regalo original? Con nuestra impresión DTF, puedes hacer pedidos desde pocas unidades con una calidad asombrosa.</li>
                    </ul>

                    <hr style="margin-top: 30px; margin-bottom: 30px;">

                    <h2>Más Allá de las Camisetas: Un Catálogo Completo</h2>
                    <p>Aunque las <strong>camisetas personalizadas</strong> son nuestra estrella, nuestro catálogo lo cubre todo:</p>
                    <ul>
                        <li>Sudaderas y Polos</li>
                        <li>Ropa Deportiva (Técnica y Transpirable)</li>
                        <li>Ropa Laboral y Alta Visibilidad</li>
                        <li>Gorras y Pañuelos</li>
                        <li>Bolsas de Tela (<em>Tote bags</em>) y Mochilas</li>
                        <li>Regalos Promocionales (Tazas, bolígrafos, USB... ¡más de 10.000 referencias!)</li>
                    </ul>

                </div>
            </div>
        </div>
        {# --- FIN DEL NUEVO CONTENIDO DE EMPRESA --- #}

        <hr style="margin-top: 30px; margin-bottom: 30px;">

        <div class="container text-center">
            <h2>{% trans %}Dónde Estamos y Contacto{% endtrans %}</h2>
            <p>{% trans %}Ven a visitarnos a nuestras instalaciones o contáctanos para cualquier duda.{% endtrans %}</p>
        </div>

        {# Aquí empieza tu contenido de mapa y contacto original #}
        <div id="map" style="height: 420px; margin-top: 20px;"></div>

        <div class="container" style="margin-top: 60px; margin-bottom: 60px;">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                    <h2 class="titulo amarillo"
                        style="margin-top: 0; font-size: 22px;">{{ empresa.descripcionContacto }}</h2>
                    <h4>Si quieres unirte a nuestro equipo de profesionales <a
                                href="{{ path('app_work_with_us') }}">rellena nuestro formulario de
                            empleo</a> y nos pondremos en contacto contigo</h4>
                </div>

                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" style="text-align: left">
                    <img class="img-responsive" style="width: 60px; text-align: center" itemprop="image"
                         src="{{ sonata_path(empresa.logo, 'big') }}" alt="{{ empresa.nombre }}"/>
                    <p itemprop="name" style="font-size: 16px;font-weight: bold">
                        {{ empresa.nombre }}
                    </p>
                    <span itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                    <p itemprop="streetAddress">
                        {{ empresa.direccionEnvio.dir }}
                    </p>
                    <p>
                        <span itemprop="postalCode">{{ empresa.direccionEnvio.cp }} </span>
                        <span itemprop="addressLocality">{{ empresa.direccionEnvio.poblacion }}</span>
                        (<span itemprop="addressRegion">{{ empresa.direccionEnvio.provincia }}</span>).
                        <span itemprop="addressCountry">{{ empresa.direccion.pais }}</span>
                    </p>
                    </span>
                    <p>
                        <a href="tel:{{ empresa.telefonoMovil }}" class="tkm-phone"><span
                                    itemprop="telephone">{{ empresa.telefonoMovil }}</span></a>
                    </p>
                    {# <p> #}
                    {# <a href="tel:{{ empresa.telefonoOtro }}">{{ empresa.telefonoOtro }}</a> #}
                    {# </p> #}
                    <p>
                        <a href="mailto:{{ empresa.email }}"><span itemprop="email">{{ empresa.email }}</span></a>
                    </p>
                </div>

                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" style="text-align: left">
                    <img class="img-responsive" style="text-align: center; width: 50%" itemprop="image"
                         src="{{ asset('images/cartelcovid.jpg') }}" alt="subvencion covid"/>
                    <br>
                    <p>
                        Esta empresa ha recibido una subvención de la Comunidad Autónoma de la Región de Murcia mediante
                        la financiación del Gobierno de España, para el apoyo a la solvencia empresarial en respuesta a
                        la pandemia de la covid-19".
                    </p>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    {# Tu script del mapa no necesita cambios #}
    <script>
        // $(function () {
        //     $('.navItem').removeClass('active');
        //     $('#navItemContacta').addClass('active');
        // });

        function initialize() {
            var myLatLng = {lat: {{ empresa.latitud }}, lng: {{ empresa.longitud }}};


            var roadAtlasStyles = [
                {
                    "featureType": "road.highway",
                    "elementType": "geometry",
                    "stylers": [
                        {"saturation": -100},
                        {"lightness": -8},
                        {"gamma": 1.18}
                    ]
                }, {
                    "featureType": "road.arterial",
                    "elementType": "geometry",
                    "stylers": [
                        {"saturation": -100},
                        {"gamma": 1},
                        {"lightness": -24}
                    ]
                }, {
                    "featureType": "poi",
                    "elementType": "geometry",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "administrative",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "transit",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "water",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "road",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "administrative",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "landscape",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {
                    "featureType": "poi",
                    "stylers": [
                        {"saturation": -100}
                    ]
                }, {}
            ];
            var styledMapOptions = {};
            var usRoadMapType = new google.maps.StyledMapType(
                roadAtlasStyles, styledMapOptions);

            {#var mapCanvas = document.getElementById('map');#}
            {#var mapOptions = {#}
            {#    center: new google.maps.LatLng({{ empresa.latitud }}, {{ empresa.longitud }}),#}
            {#    zoom: 18,#}
            {#    mapTypeId: google.maps.MapTypeId.ROADMAP,#}
            {#    draggable: false,#}
            {#    scrollwheel: false#}

            {#}#}
            {#var map = new google.maps.Map(mapCanvas, mapOptions)#}

            {#//Aqui va la marca#}
            var pinColor = "fDB45E";
            var pinImage = new google.maps.MarkerImage("https://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
                new google.maps.Size(21, 34),
                new google.maps.Point(0, 0),
                new google.maps.Point(10, 34));
            var pinShadow = new google.maps.MarkerImage("https://chart.apis.google.com/chart?chst=d_map_pin_shadow",
                new google.maps.Size(40, 37),
                new google.maps.Point(0, 0),
                new google.maps.Point(12, 35));

            // var marker = new google.maps.Marker({
            //     position: myLatLng,
            //     map: map,
            //     icon: pinImage,
            //     shadow: pinShadow,
            //     title: 'Estamos Aqui!'
            // });

            let map;

            async function initMap_AdvancedMarkerElement() {
                const myLatLng = { lat: {{ empresa.latitud }}, lng: {{ empresa.longitud }} };
                const { Map } = await google.maps.importLibrary("maps");
                const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

                // The map, centered at Uluru
                map = new Map(document.getElementById("map"), {
                    zoom: 19,
                    center: myLatLng,
                    // disableDefaultUI: true, // a way to quickly hide all controls
                    mapId: "DEMO_MAP_ID",
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    // draggable: false,
                    scrollwheel: false
                });

                // The marker, positioned at Uluru
                const marker = new AdvancedMarkerElement({
                    map: map,
                    position: myLatLng,
                    title: "{{ empresa.nombre }}",
                });
            }

            // const faMarker = new AdvancedMarkerElement({
            //     map,
            //     position: { lat: 37.412, lng: -122.095829650878 },
            //     content: faPin.element,
            //     title: "A marker using a FontAwesome icon for the glyph.",
            // });


            initMap_AdvancedMarkerElement();


            var contentString = '<div id="map-content">' +
                '<div id="siteNotice">' +
                '</div>' +
                '<h2 class="titulo2 amarillo" style="text-align:center">{{ empresa.nombre }}</h2>' +
                '<div id="bodyContent">' +
                '<p>{{ empresa.nombre }}</p>' +
                    {# '<p>{{ empresa.direccion.dir }}</p>' + #}
                    {# '<p>{{ empresa.direccion.cp }} {{ empresa.direccion.poblacion }} ({{ empresa.direccion.provincia }}) {{ empresa.direccion.pais }}</p>' + #}
                ' <a href="http://maps.apple.com/?daddr={{ empresa.latitud }},{{ empresa.longitud }}" target="blank">Cómo llegar</a>' +
                '</div>' +
                '</div>';

            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            marker.addListener('click', function () {
                infowindow.open(map, marker);
            });

            map.mapTypes.set('usroadatlas', usRoadMapType);
            map.setMapTypeId('usroadatlas');



        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
{% endblock %}