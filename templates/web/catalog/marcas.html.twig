{% extends "base.html.twig" %}

{% block title %}Marcas de ropa para personalizar | tuskamisetas{% endblock %}
{% block metaDescription %}En TusKamisetas tenemos las mejores marcas en camisetas baratas, sudaderas baratas y regalos de empresa del mercado.{% endblock %}

{% block baseBody %}
    <div class="container" style="padding: 20px 0;">
        {% include 'web/partials/_breadcrumbs.html.twig' with {'context': context} %}

        <div class="features_items">
            <h1 class="titulo text-center">NUESTRAS MARCAS DE ROPA PARA PUBLICIDAD Y EVENTOS</h1>

            <div style="padding: 15px; font-size: 13px; text-align: center; max-width: 800px; margin: 0 auto 30px auto;">
                En nuestro catálogo contamos con los más prestigiosos <b>fabricantes de ropa</b> para publicidad, ropa deportiva y regalos de empresa para personalizar. Si quieres <b>serigrafíar camisetas de una marca en concreto</b>, nosotros ponemos a tu disposición todo el catálogo del fabricante.<br> En esta sección te mostramos todos los fabricantes con los que trabajamos para que encuentres las prendas que buscas a precios de mayorista.
            </div>

            <!-- INICIO DE LA MEJORA: Filtro de Búsqueda -->
            <div class="row" style="margin-bottom: 30px;">
                <div class="col-md-6 col-md-offset-3">
                    <input type="text" id="brand-search-filter" class="form-control" placeholder="Buscar marca por nombre...">
                </div>
            </div>
            <!-- FIN DE LA MEJORA -->

            <div class="row" id="brands-grid">
                {% if fabricantes is not empty %}
                    {% for fabricante in fabricantes %}
                        <div class="col-sm-3 brand-item" style="margin-bottom: 30px;">
                            <div class="product-image-wrapper text-center" style="border: 1px solid #e0e0e0; padding: 15px; border-radius: 5px; height: 100%;">
                                <div class="single-products">
                                    <div class="productinfo">
                                        <a href="{{ path('app_catalog_resolver', {'_locale': app.request.locale, 'slug': fabricante.nombreUrl}) }}" style="text-decoration: none; color: inherit;">
                                            {% if fabricante.imagen %}
                                                <img src="{{ sonata_path(fabricante.imagen, 'wide') }}" alt="{{ fabricante.nombre }}" class="img-responsive" style="height: 150px; width: auto; margin: 0 auto; object-fit: contain;"/>
                                            {% else %}
                                                <div style="height: 150px; display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; border-radius: 4px;">
                                                    <span style="font-size: 18px; color: #888;">{{ fabricante.nombre }}</span>
                                                </div>
                                            {% endif %}
                                            <h4 style="margin-top: 15px; font-weight: bold;">{{ fabricante.nombre }}</h4>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    <div class="col-xs-12 text-center" id="no-brands-found" style="display: none;">
                        <p class="alert alert-warning">No se han encontrado marcas que coincidan con tu búsqueda.</p>
                    </div>
                {% else %}
                    <div class="col-xs-12">
                        <p class="alert alert-info">No hay marcas disponibles para mostrar en este momento.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('brand-search-filter');
            const brandsGrid = document.getElementById('brands-grid');
            const brands = brandsGrid.querySelectorAll('.brand-item');
            const noResultsMessage = document.getElementById('no-brands-found');

            searchInput.addEventListener('keyup', function() {
                const filterValue = this.value.toLowerCase().trim();
                let visibleBrands = 0;

                brands.forEach(function(brand) {
                    const brandName = brand.querySelector('h4').textContent.toLowerCase();

                    if (brandName.includes(filterValue)) {
                        brand.style.display = '';
                        visibleBrands++;
                    } else {
                        brand.style.display = 'none';
                    }
                });

                // Muestra u oculta el mensaje de "no se encontraron resultados"
                if (visibleBrands === 0) {
                    noResultsMessage.style.display = 'block';
                } else {
                    noResultsMessage.style.display = 'none';
                }
            });
        });
    </script>
{% endblock %}

