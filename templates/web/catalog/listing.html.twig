{% extends "web/indexTemplate.html.twig" %}

{% block title %}
    {# ... (Tu lógica para el título SEO) ... #}
{% endblock %}

{% block metaDescription %}
    {# ... (Tu lógica para la meta descripción) ... #}
{% endblock %}

{% block migas %}
    {# MIGRACIÓN: El bloque de migas de pan ahora es mucho más simple y se construye a partir del objeto 'context' #}
    <div class="breadcrumbs">
        <ol itemscope itemtype="http://schema.org/BreadcrumbList" class="breadcrumb">
            <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                <a itemprop="item" href="{{ path('app_home', {'_locale': app.request.locale}) }}"><span itemprop="name">{% trans %}Principal{% endtrans %}</span></a>
                <meta itemprop="position" content="1"/>
            </li>
            {# Aquí se podría construir el resto del breadcrumb dinámicamente #}
            <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="active">
                <a itemprop="item" href="{{ app.request.uri }}" class="miActive"><span itemprop="name">{{ context.name|default('Resultados') }}</span></a>
                <meta itemprop="position" content="2"/>
            </li>
        </ol>
    </div>
{% endblock %}

{% block cuerpo %}
    <div class="features_items">
        {# ... (Tu lógica para mostrar los filtros activos) ... #}

        <h1 class="title text-center">{{ nombrePanel|default(context.name|default('Catálogo Listing')) }}</h1>
        <p class="subtitle text-center">- {{ cantidadArticulos }} Artículos -</p>

        {# ... (Tu lógica para mostrar subcategorías si aplica) ... #}

        {# MIGRACIÓN: Incluimos la nueva parrilla de productos, pasándole los modelos del paginador #}
{#        {% include 'web/catalog/_producto_grid.html.twig' with {'modelos': modelos} %}#}
    </div>

    {# ... (Tu lógica de textos arriba/abajo y paginación) ... #}

    {# MIGRACIÓN: El JavaScript ahora necesita generar las URLs de los filtros #}
    <script>
        function eliminaFabricante(fabricanteId) {
            const params = new URLSearchParams(window.location.search);
            params.delete('fabricante'); // Suponiendo que el filtro se llama 'fabricante'
            window.location.search = params.toString();
        }
        // ... (lógica similar para eliminaColor y eliminaFiltro)
    </script>
{% endblock %}
